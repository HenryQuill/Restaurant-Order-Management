<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nhân viên quản lý</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="d-flex">
    <div class="sidebar bg-dark text-white">
      <a href="#tables" class="nav-link active" data-tab="tables">Danh sách bàn</a>
      <a href="#bills" class="nav-link" data-tab="bills">Tổng hợp phiếu tính tiền</a>
      <a href="#history" class="nav-link" data-tab="history">Lịch sử phiếu tính tiền</a>
      <a href="login.html" onclick="logout()">Đăng xuất</a>
    </div>
    <div class="content flex-grow-1 p-4">
      <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link active" href="#tables" data-tab="tables">Danh sách bàn</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#bills" data-tab="bills">Tổng hợp phiếu tính tiền</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#history" data-tab="history">Lịch sử phiếu tính tiền</a>
        </li>
      </ul>
      <div id="tables" class="tab-content active">
        <h3>Danh sách bàn</h3>
        <div class="row row-cols-4 g-4" id="table-grid"></div>
        <div id="order-details" class="d-none">
          <h3>Chi tiết đơn hàng - <span id="table-name"></span></h3>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Món ăn</th>
                <th>Số lượng</th>
                <th>Ghi chú</th>
                <th>Giá</th>
              </tr>
            </thead>
            <tbody id="order-items"></tbody>
          </table>
          <div class="add-dish-form">
            <select id="dish-select" class="form-select d-inline-block w-auto"></select>
            <input type="number" id="quantity" class="form-control d-inline-block w-auto" value="1" min="1">
            <input type="text" id="note" class="form-control d-inline-block w-auto" placeholder="Ghi chú">
            <button class="btn btn-primary" style="background-color: #ff7e00; border: none;" onclick="addDish()">Thêm món</button>
          </div>
          <button class="btn btn-primary mt-3" style="background-color: #ff7e00; border: none;" onclick="finishOrder()">Kết thúc đơn hàng</button>
        </div>
      </div>
      <div id="bills" class="tab-content">
        <h3>Tổng hợp phiếu tính tiền</h3>
        <select id="shift-select" class="form-select w-auto mb-3" onchange="fetchBills()">
          <option value="">Chọn ca trực</option>
        </select>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Mã hóa đơn</th>
              <th>Bàn</th>
              <th>Nhân viên</th>
              <th>Ca trực</th>
              <th>Tổng tiền</th>
            </tr>
          </thead>
          <tbody id="bill-list"></tbody>
        </table>
      </div>
      <div id="history" class="tab-content">
        <h3>Lịch sử phiếu tính tiền</h3>
        <div class="mb-3">
          <input type="date" id="start-date" class="form-control d-inline-block w-auto">
          <input type="date" id="end-date" class="form-control d-inline-block w-auto">
          <button class="btn btn-primary" style="background-color: #ff7e00; border: none;" onclick="fetchHistory()">Lọc</button>
        </div>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Mã hóa đơn</th>
              <th>Bàn</th>
              <th>Ngày</th>
              <th>Tổng tiền</th>
            </tr>
          </thead>
          <tbody id="history-list"></tbody>
        </table>
        <canvas id="revenueChart" width="400" height="200"></canvas>
      </div>
    </div>
  </div>
  <script src="js/manager.js"></script>
</body>
</html>